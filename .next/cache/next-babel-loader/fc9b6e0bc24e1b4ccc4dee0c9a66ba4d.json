{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gmont\\\\sekndproduction\\\\state\\\\GridSquaresContext.tsx\";\nvar __jsx = React.createElement;\nimport * as React from \"react\";\nimport Cookie from \"js-cookie\";\n\nconst squaresReducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_SQUARES\":\n      return {\n        squares: [...new Array(action.payload.numberOfSquares)].map(() => ({\n          part: null\n        }))\n      };\n\n    case \"ADD_PART_TO_SQUARE\":\n      return {\n        squares: state.squares.map((square, i) => {\n          return i !== action.payload.index ? square : {\n            part: action.payload.part\n          };\n        })\n      };\n\n    case \"REMOVE_PART_FROM_SQUARE\":\n      return {\n        squares: state.squares.map((square, i) => {\n          return i !== action.payload.index ? {\n            part: action.payload.part\n          } : square;\n        })\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst SquaresContext = /*#__PURE__*/React.createContext(undefined);\nconst SquaresDispatch = /*#__PURE__*/React.createContext(undefined);\nexport const SquaresProvider = ({\n  children,\n  initialValue\n}) => {\n  const [state, dispatch] = React.useReducer(squaresReducer, initialValue ? initialValue : {\n    squares: []\n  });\n  React.useEffect(() => {\n    Cookie.set(\"squares\", state);\n  }, [state]);\n  return __jsx(SquaresContext.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, __jsx(SquaresDispatch.Provider, {\n    value: dispatch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, children));\n};\nexport const useSquaresState = () => {\n  const context = React.useContext(SquaresContext);\n\n  if (context === undefined) {\n    throw new Error(\"Please use within Squares Provider\");\n  }\n\n  return context;\n};\nexport const useSquaresDispatch = () => {\n  const context = React.useContext(SquaresDispatch);\n\n  if (context === undefined) {\n    throw new Error(\"Please use within Squares Provider\");\n  }\n\n  return context;\n};","map":{"version":3,"sources":["C:/Users/gmont/sekndproduction/state/GridSquaresContext.tsx"],"names":["React","Cookie","squaresReducer","state","action","type","squares","Array","payload","numberOfSquares","map","part","square","i","index","SquaresContext","createContext","undefined","SquaresDispatch","SquaresProvider","children","initialValue","dispatch","useReducer","useEffect","set","useSquaresState","context","useContext","Error","useSquaresDispatch"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAeA,MAAMC,cAA4C,GAAG,CACnDC,KADmD,EAEnDC,MAFmD,KAGhD;AACH,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,aAAL;AACE,aAAO;AACLC,QAAAA,OAAO,EAAE,CAAC,GAAG,IAAIC,KAAJ,CAAUH,MAAM,CAACI,OAAP,CAAeC,eAAzB,CAAJ,EAA+CC,GAA/C,CAAmD,OAAO;AACjEC,UAAAA,IAAI,EAAE;AAD2D,SAAP,CAAnD;AADJ,OAAP;;AAKF,SAAK,oBAAL;AACE,aAAO;AACLL,QAAAA,OAAO,EAAEH,KAAK,CAACG,OAAN,CAAcI,GAAd,CAAkB,CAACE,MAAD,EAASC,CAAT,KAAe;AACxC,iBAAOA,CAAC,KAAKT,MAAM,CAACI,OAAP,CAAeM,KAArB,GACHF,MADG,GAEH;AAAED,YAAAA,IAAI,EAAEP,MAAM,CAACI,OAAP,CAAeG;AAAvB,WAFJ;AAGD,SAJQ;AADJ,OAAP;;AAOF,SAAK,yBAAL;AACE,aAAO;AACLL,QAAAA,OAAO,EAAEH,KAAK,CAACG,OAAN,CAAcI,GAAd,CAAkB,CAACE,MAAD,EAASC,CAAT,KAAe;AACxC,iBAAOA,CAAC,KAAKT,MAAM,CAACI,OAAP,CAAeM,KAArB,GACH;AAAEH,YAAAA,IAAI,EAAEP,MAAM,CAACI,OAAP,CAAeG;AAAvB,WADG,GAEHC,MAFJ;AAGD,SAJQ;AADJ,OAAP;;AAOF;AACE,aAAOT,KAAP;AAxBJ;AA0BD,CA9BD;;AAgCA,MAAMY,cAAoC,gBAAGf,KAAK,CAACgB,aAAN,CAAoBC,SAApB,CAA7C;AAEA,MAAMC,eAEL,gBAAGlB,KAAK,CAACgB,aAAN,CAAoBC,SAApB,CAFJ;AAIA,OAAO,MAAME,eAMI,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAD,KAAgC;AAClD,QAAM,CAAClB,KAAD,EAAQmB,QAAR,IAAoBtB,KAAK,CAACuB,UAAN,CACxBrB,cADwB,EAExBmB,YAAY,GACRA,YADQ,GAER;AACEf,IAAAA,OAAO,EAAE;AADX,GAJoB,CAA1B;AASAN,EAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AACpBvB,IAAAA,MAAM,CAACwB,GAAP,CAAW,SAAX,EAAsBtB,KAAtB;AACD,GAFD,EAEG,CAACA,KAAD,CAFH;AAIA,SACE,MAAC,cAAD,CAAgB,QAAhB;AAAyB,IAAA,KAAK,EAAEA,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,eAAD,CAAiB,QAAjB;AAA0B,IAAA,KAAK,EAAEmB,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGF,QADH,CADF,CADF;AAOD,CA3BM;AA6BP,OAAO,MAAMM,eAAe,GAAG,MAAa;AAC1C,QAAMC,OAAO,GAAG3B,KAAK,CAAC4B,UAAN,CAAiBb,cAAjB,CAAhB;;AACA,MAAIY,OAAO,KAAKV,SAAhB,EAA2B;AACzB,UAAM,IAAIY,KAAJ,CAAU,oCAAV,CAAN;AACD;;AACD,SAAOF,OAAP;AACD,CANM;AAQP,OAAO,MAAMG,kBAAkB,GAAG,MAA8B;AAC9D,QAAMH,OAAO,GAAG3B,KAAK,CAAC4B,UAAN,CAAiBV,eAAjB,CAAhB;;AAEA,MAAIS,OAAO,KAAKV,SAAhB,EAA2B;AACzB,UAAM,IAAIY,KAAJ,CAAU,oCAAV,CAAN;AACD;;AACD,SAAOF,OAAP;AACD,CAPM","sourcesContent":["import * as React from \"react\";\r\nimport Cookie from \"js-cookie\";\r\n\r\ntype State = {\r\n  squares: { part: { [key: string]: any } | null }[];\r\n};\r\ntype Action = {\r\n  type: string;\r\n  payload: {\r\n    numberOfSquares?: number;\r\n    part?: { [key: string]: any };\r\n    index?: number;\r\n    id?: string;\r\n  };\r\n};\r\n\r\nconst squaresReducer: React.Reducer<State, Action> = (\r\n  state: State,\r\n  action: Action\r\n) => {\r\n  switch (action.type) {\r\n    case \"ADD_SQUARES\":\r\n      return {\r\n        squares: [...new Array(action.payload.numberOfSquares)].map(() => ({\r\n          part: null,\r\n        })),\r\n      };\r\n    case \"ADD_PART_TO_SQUARE\":\r\n      return {\r\n        squares: state.squares.map((square, i) => {\r\n          return i !== action.payload.index\r\n            ? square\r\n            : { part: action.payload.part };\r\n        }),\r\n      };\r\n    case \"REMOVE_PART_FROM_SQUARE\":\r\n      return {\r\n        squares: state.squares.map((square, i) => {\r\n          return i !== action.payload.index\r\n            ? { part: action.payload.part }\r\n            : square;\r\n        }),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst SquaresContext: React.Context<State> = React.createContext(undefined);\r\n\r\nconst SquaresDispatch: React.Context<\r\n  React.Dispatch<Action> | undefined\r\n> = React.createContext(undefined);\r\n\r\nexport const SquaresProvider: ({\r\n  children,\r\n  initialValue,\r\n}: {\r\n  children: React.ReactNode;\r\n  initialValue?: { squares: { part: { [key: string]: any } | null }[] };\r\n}) => JSX.Element = ({ children, initialValue }) => {\r\n  const [state, dispatch] = React.useReducer(\r\n    squaresReducer,\r\n    initialValue\r\n      ? initialValue\r\n      : {\r\n          squares: [],\r\n        }\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    Cookie.set(\"squares\", state);\r\n  }, [state]);\r\n\r\n  return (\r\n    <SquaresContext.Provider value={state}>\r\n      <SquaresDispatch.Provider value={dispatch}>\r\n        {children}\r\n      </SquaresDispatch.Provider>\r\n    </SquaresContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useSquaresState = (): State => {\r\n  const context = React.useContext(SquaresContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"Please use within Squares Provider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const useSquaresDispatch = (): React.Dispatch<Action> => {\r\n  const context = React.useContext(SquaresDispatch);\r\n\r\n  if (context === undefined) {\r\n    throw new Error(\"Please use within Squares Provider\");\r\n  }\r\n  return context;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}