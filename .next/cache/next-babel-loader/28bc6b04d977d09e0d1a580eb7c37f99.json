{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport useSWR from \"swr\";\nexport default function useAPICalls(setSearchParameters, urlStart) {\n  _s();\n\n  // if (!setSearchParameters)\n  //   return {\n  //     items: [],\n  //     loading: true,\n  //     errors: {\n  //       yelpEventsError: \"\",\n  //       yelpPlacesError: \"\",\n  //       ticketmasterError: \"\",\n  //     },\n  //   };\n  var _useSWR = useSWR(setSearchParameters && setSearchParameters.searchType !== \"EVENTS\" ? \"\".concat(urlStart, \"/api/yelpBusinessesAPI\") : null, /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n      var location, radius, placeType, response, responseJSON, businesses;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              location = setSearchParameters.location, radius = setSearchParameters.radius, placeType = setSearchParameters.placeType;\n              _context.prev = 1;\n              console.log(url ? \"fetching yelp places\" : \"cancelled places fetch\");\n              _context.next = 5;\n              return fetch(url, {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\"\n                },\n                method: \"POST\",\n                body: JSON.stringify({\n                  location: location,\n                  radius: parseInt(radius),\n                  term: placeType\n                })\n              });\n\n            case 5:\n              response = _context.sent;\n              _context.next = 8;\n              return response.json();\n\n            case 8:\n              responseJSON = _context.sent;\n              businesses = responseJSON.businesses;\n              businesses.forEach(function (business) {\n                return business[\"type\"] = \"place\", business[\"source\"] = \"yelp\", business[\"inParts\"] = false;\n              });\n              return _context.abrupt(\"return\", businesses);\n\n            case 14:\n              _context.prev = 14;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", _context.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 14]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(), {\n    revalidateOnFocus: false\n  }),\n      yelpPlaces = _useSWR.data,\n      yelpPlacesError = _useSWR.error,\n      yelpPlacesLoading = _useSWR.isValidating;\n\n  var _useSWR2 = useSWR(setSearchParameters && setSearchParameters.searchType !== \"PLACES\" ? \"\".concat(urlStart, \"/api/yelpEventsAPI\") : null, /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url) {\n      var location, radius, unixStartDate, unixEndDate, response, responseJSON, events;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              location = setSearchParameters.location, radius = setSearchParameters.radius, unixStartDate = setSearchParameters.unixStartDate, unixEndDate = setSearchParameters.unixEndDate;\n              _context2.prev = 1;\n              console.log(url ? \"fetching yelp events\" : \"cancelled events fetch\");\n              _context2.next = 5;\n              return fetch(url, {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\"\n                },\n                method: \"POST\",\n                body: JSON.stringify({\n                  location: location,\n                  radius: parseInt(radius),\n                  start_date: parseInt(unixStartDate),\n                  end_date: parseInt(unixEndDate)\n                })\n              });\n\n            case 5:\n              response = _context2.sent;\n              _context2.next = 8;\n              return response.json();\n\n            case 8:\n              responseJSON = _context2.sent;\n              events = responseJSON.events;\n              events.forEach(function (event) {\n                return event[\"type\"] = \"event\", event[\"source\"] = \"yelp\", event[\"inParts\"] = false;\n              });\n              return _context2.abrupt(\"return\", events);\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](1);\n              return _context2.abrupt(\"return\", _context2.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 14]]);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), {\n    revalidateOnFocus: false\n  }),\n      yelpEvents = _useSWR2.data,\n      yelpEventsError = _useSWR2.error,\n      yelpEventsLoading = _useSWR2.isValidating;\n\n  var _useSWR3 = useSWR(setSearchParameters && setSearchParameters.searchType !== \"PLACES\" ? \"\".concat(urlStart, \"/api/ticketmasterAPI\") : null, /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(url) {\n      var location, radius, startFormatted, endFormatted, response, responseJSON, events;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              location = setSearchParameters.location, radius = setSearchParameters.radius, startFormatted = setSearchParameters.startFormatted, endFormatted = setSearchParameters.endFormatted;\n              _context3.prev = 1;\n              console.log(url ? \"fetching yelp events\" : \"cancelled ticketmaster fetch\");\n              _context3.next = 5;\n              return fetch(url, {\n                headers: {\n                  Accept: \"application/json\",\n                  \"Content-Type\": \"application/json\"\n                },\n                method: \"POST\",\n                body: JSON.stringify({\n                  location: location,\n                  radius: Math.floor(parseInt(radius) * 0.001).toString(),\n                  startDateTime: startFormatted,\n                  endDateTime: endFormatted\n                })\n              });\n\n            case 5:\n              response = _context3.sent;\n              _context3.next = 8;\n              return response.json();\n\n            case 8:\n              responseJSON = _context3.sent;\n              events = responseJSON._embedded.events;\n              events.forEach(function (event) {\n                return event[\"source\"] = \"ticketmaster\", event[\"type\"] = \"event\", event[\"inParts\"] = false;\n              });\n              return _context3.abrupt(\"return\", events);\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](1);\n              return _context3.abrupt(\"return\", _context3.t0.message);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 14]]);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), {\n    revalidateOnFocus: false\n  }),\n      ticketmaster = _useSWR3.data,\n      ticketmasterError = _useSWR3.error,\n      ticketmasterLoading = _useSWR3.isValidating;\n\n  var checkYelpPlacesArray = Array.isArray(yelpPlaces) ? yelpPlaces : [];\n  var checkYelpEventsArray = Array.isArray(yelpEvents) ? yelpEvents : [];\n  var checkTicketMasterArray = Array.isArray(ticketmaster) ? ticketmaster : [];\n  return {\n    items: [].concat(_toConsumableArray(checkTicketMasterArray), _toConsumableArray(checkYelpEventsArray), _toConsumableArray(checkYelpPlacesArray)),\n    loading: ticketmasterLoading || yelpEventsLoading || yelpPlacesLoading,\n    errors: {\n      yelpEventsError: yelpEventsError,\n      yelpPlacesError: yelpPlacesError,\n      ticketmasterError: ticketmasterError\n    }\n  };\n}\n\n_s(useAPICalls, \"z/lIHzJJb1Rtaz0VIMPo38LURzk=\", false, function () {\n  return [useSWR, useSWR, useSWR];\n});","map":{"version":3,"sources":["C:/Users/gmont/sekndproduction/swr/useAPICalls.ts"],"names":["useSWR","useAPICalls","setSearchParameters","urlStart","searchType","url","location","radius","placeType","console","log","fetch","headers","Accept","method","body","JSON","stringify","parseInt","term","response","json","responseJSON","businesses","forEach","business","message","revalidateOnFocus","yelpPlaces","data","yelpPlacesError","error","yelpPlacesLoading","isValidating","unixStartDate","unixEndDate","start_date","end_date","events","event","yelpEvents","yelpEventsError","yelpEventsLoading","startFormatted","endFormatted","Math","floor","toString","startDateTime","endDateTime","_embedded","ticketmaster","ticketmasterError","ticketmasterLoading","checkYelpPlacesArray","Array","isArray","checkYelpEventsArray","checkTicketMasterArray","items","loading","errors"],"mappings":"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","sourcesContent":["import useSWR, { responseInterface } from \"swr\";\r\n\r\ntype APIResponse = { [key: string]: any }[];\r\n\r\ntype Results = {\r\n  items: { [key: string]: any }[] | null;\r\n  errors: {\r\n    yelpPlacesError?: string | undefined;\r\n    yelpEventsError?: string | undefined;\r\n    ticketmasterError?: string | undefined;\r\n  };\r\n};\r\n\r\nexport default function useAPICalls(\r\n  setSearchParameters: { [key: string]: any } | null,\r\n  urlStart: string\r\n): {\r\n  items: APIResponse;\r\n  loading: boolean;\r\n  errors: {\r\n    yelpPlacesError: string;\r\n    yelpEventsError: string;\r\n    ticketmasterError: string;\r\n  };\r\n} {\r\n  // if (!setSearchParameters)\r\n  //   return {\r\n  //     items: [],\r\n  //     loading: true,\r\n  //     errors: {\r\n  //       yelpEventsError: \"\",\r\n  //       yelpPlacesError: \"\",\r\n  //       ticketmasterError: \"\",\r\n  //     },\r\n  //   };\r\n  const {\r\n    data: yelpPlaces,\r\n    error: yelpPlacesError,\r\n    isValidating: yelpPlacesLoading,\r\n  }: responseInterface<APIResponse, string> = useSWR(\r\n    setSearchParameters && setSearchParameters.searchType !== \"EVENTS\"\r\n      ? `${urlStart}/api/yelpBusinessesAPI`\r\n      : null,\r\n\r\n    async (url) => {\r\n      const { location, radius, placeType } = setSearchParameters;\r\n      try {\r\n        console.log(url ? \"fetching yelp places\" : \"cancelled places fetch\");\r\n        const response: Response = await fetch(url, {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          method: \"POST\",\r\n          body: JSON.stringify({\r\n            location,\r\n            radius: parseInt(radius),\r\n            term: placeType,\r\n          }),\r\n        });\r\n\r\n        const responseJSON = await response.json();\r\n\r\n        const {\r\n          businesses,\r\n        }: { businesses: { [key: string]: any }[] } = responseJSON;\r\n        businesses.forEach(\r\n          (business) => (\r\n            (business[\"type\"] = \"place\"),\r\n            (business[\"source\"] = \"yelp\"),\r\n            (business[\"inParts\"] = false)\r\n          )\r\n        );\r\n\r\n        return businesses;\r\n      } catch (err) {\r\n        return err.message;\r\n      }\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n    }\r\n  );\r\n\r\n  const {\r\n    data: yelpEvents,\r\n    error: yelpEventsError,\r\n    isValidating: yelpEventsLoading,\r\n  }: responseInterface<APIResponse, string> = useSWR(\r\n    setSearchParameters && setSearchParameters.searchType !== \"PLACES\"\r\n      ? `${urlStart}/api/yelpEventsAPI`\r\n      : null,\r\n    async (url) => {\r\n      const {\r\n        location,\r\n        radius,\r\n        unixStartDate,\r\n        unixEndDate,\r\n      } = setSearchParameters;\r\n      try {\r\n        console.log(url ? \"fetching yelp events\" : \"cancelled events fetch\");\r\n        const response: Response = await fetch(url, {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          method: \"POST\",\r\n          body: JSON.stringify({\r\n            location,\r\n            radius: parseInt(radius),\r\n            start_date: parseInt(unixStartDate),\r\n            end_date: parseInt(unixEndDate),\r\n          }),\r\n        });\r\n\r\n        const responseJSON = await response.json();\r\n\r\n        const { events }: { events: { [key: string]: any }[] } = responseJSON;\r\n        events.forEach(\r\n          (event) => (\r\n            (event[\"type\"] = \"event\"),\r\n            (event[\"source\"] = \"yelp\"),\r\n            (event[\"inParts\"] = false)\r\n          )\r\n        );\r\n        return events;\r\n      } catch (err) {\r\n        return err.message;\r\n      }\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n    }\r\n  );\r\n\r\n  const {\r\n    data: ticketmaster,\r\n    error: ticketmasterError,\r\n    isValidating: ticketmasterLoading,\r\n  }: responseInterface<APIResponse, string> = useSWR(\r\n    setSearchParameters && setSearchParameters.searchType !== \"PLACES\"\r\n      ? `${urlStart}/api/ticketmasterAPI`\r\n      : null,\r\n    async (url) => {\r\n      const {\r\n        location,\r\n        radius,\r\n        startFormatted,\r\n        endFormatted,\r\n      } = setSearchParameters;\r\n      try {\r\n        console.log(\r\n          url ? \"fetching yelp events\" : \"cancelled ticketmaster fetch\"\r\n        );\r\n\r\n        const response: Response = await fetch(url, {\r\n          headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          method: \"POST\",\r\n          body: JSON.stringify({\r\n            location,\r\n            radius: Math.floor(parseInt(radius) * 0.001).toString(),\r\n            startDateTime: startFormatted,\r\n            endDateTime: endFormatted,\r\n          }),\r\n        });\r\n\r\n        const responseJSON = await response.json();\r\n        const {\r\n          _embedded: { events },\r\n        }: { _embedded: { events: { [key: string]: any }[] } } = responseJSON;\r\n\r\n        events.forEach(\r\n          (event) => (\r\n            (event[\"source\"] = \"ticketmaster\"),\r\n            (event[\"type\"] = \"event\"),\r\n            (event[\"inParts\"] = false)\r\n          )\r\n        );\r\n\r\n        return events;\r\n      } catch (err) {\r\n        return err.message;\r\n      }\r\n    },\r\n    {\r\n      revalidateOnFocus: false,\r\n    }\r\n  );\r\n\r\n  const checkYelpPlacesArray: Results[\"items\"] | [] = Array.isArray(yelpPlaces)\r\n    ? yelpPlaces\r\n    : [];\r\n  const checkYelpEventsArray: Results[\"items\"] | [] = Array.isArray(yelpEvents)\r\n    ? yelpEvents\r\n    : [];\r\n  const checkTicketMasterArray: Results[\"items\"] | [] = Array.isArray(\r\n    ticketmaster\r\n  )\r\n    ? ticketmaster\r\n    : [];\r\n\r\n  return {\r\n    items: [\r\n      ...checkTicketMasterArray,\r\n      ...checkYelpEventsArray,\r\n      ...checkYelpPlacesArray,\r\n    ],\r\n    loading: ticketmasterLoading || yelpEventsLoading || yelpPlacesLoading,\r\n    errors: { yelpEventsError, yelpPlacesError, ticketmasterError },\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}