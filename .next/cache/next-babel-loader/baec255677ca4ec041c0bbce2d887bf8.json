{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\gmont\\\\sekndproduction\\\\components\\\\SearchResults\\\\ResultCard\\\\ResultCard.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { PriceAndType, Reviews, Phone, Location } from \"./Parts/PlacesInfo\";\nimport { EventTimesVenue, EventPriceGenre, EventDescription } from \"./Parts/EventsInfo\";\nimport { PartLink } from \"./Parts/PartLink\";\nimport * as React from \"react\";\nimport { usePartsDispatch, usePartsState } from \"../../../state/DatePartsContext\";\nimport css from \"./ResultCard.module.scss\";\nexport var ResultCard = function ResultCard(_ref) {\n  _s();\n\n  var item = _ref.item,\n      resultsLoading = _ref.resultsLoading;\n\n  var _React$useState = React.useState({\n    added: false,\n    moreInfo: false,\n    imageLoaded: false\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      state = _React$useState2[0],\n      setState = _React$useState2[1];\n\n  var GlobalParts = usePartsState();\n  React.useEffect(function () {\n    if (item) {\n      for (var i = 0; i < GlobalParts.parts.length; i++) {\n        if (GlobalParts.parts[i].id === item.id) {\n          setState(function (state) {\n            return _objectSpread(_objectSpread({}, state), {}, {\n              added: true\n            });\n          });\n        }\n      }\n    }\n  }, [GlobalParts]);\n\n  var determineImageBackgroundSource = function determineImageBackgroundSource() {\n    switch (item.type) {\n      case \"place\":\n        return item.source === \"yelp\" ? item.image_url : null;\n\n      case \"event\":\n        return item.source === \"yelp\" ? item.image_url : item.images[0].url;\n\n      default:\n        return \"\";\n    }\n  };\n\n  var handleRetract = function handleRetract() {\n    return state.moreInfo ? setState(function (state) {\n      return _objectSpread(_objectSpread({}, state), {}, {\n        moreInfo: false\n      });\n    }) : null;\n  };\n\n  var moreDetails = function moreDetails(type) {\n    if (!state.moreInfo) return null;\n\n    switch (type) {\n      case \"place\":\n        return __jsx(\"div\", {\n          className: css.detailsWrapper,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 11\n          }\n        }, __jsx(Phone, {\n          phone: item.phone,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }\n        }), __jsx(Location, {\n          street: item.location.display_address[0],\n          city: item.location.display_address[1],\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }\n        }), __jsx(PartLink, {\n          url: item.url,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }\n        }));\n\n      case \"event\":\n        return __jsx(\"div\", {\n          className: css.detailsWrapper,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 11\n          }\n        }, __jsx(EventDescription, {\n          description: item.description,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }\n        }), __jsx(PartLink, {\n          url: item.source === \"yelp\" ? item.event_site_url : item.url,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }\n        }));\n\n      default:\n        return __jsx(\"div\", {\n          className: css.detailsWrapper,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 16\n          }\n        });\n    }\n  };\n\n  var setCardDetails = function setCardDetails() {\n    switch (item.type) {\n      case \"place\":\n        return __jsx(React.Fragment, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 11\n          }\n        }, __jsx(\"div\", {\n          className: \"\".concat(css.infoBar, \" \").concat(state.moreInfo ? css.extended : null),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }\n        }, __jsx(\"span\", {\n          className: css.title,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }\n        }, item.name), __jsx(Reviews, {\n          reviewCount: item.review_count,\n          rating: item.rating,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }\n        }), __jsx(PriceAndType, {\n          price: item.price,\n          city: item.location.city,\n          state: item.location.state,\n          type: item.categories && item.categories.length > 0 ? item.categories[0].title : null,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }\n        }), __jsx(\"div\", {\n          className: css.starsWrapper,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }\n        })), moreDetails(\"place\"));\n\n      case \"event\":\n        var determinePrice = function determinePrice() {\n          switch (item.source) {\n            case \"yelp\":\n              if (!item.cost) return null;\n              return item.cost;\n\n            case \"ticketmaster\":\n              if (!item.priceRanges) return null;\n              return item.priceRanges[0];\n          }\n        };\n\n        var determineVenue = function determineVenue() {\n          switch (item.source) {\n            case \"yelp\":\n              return !item.businesess_id || item.business_id === null ? null : item.business_id;\n\n            case \"ticketmaster\":\n              return item._embedded.venues[0].name;\n          }\n        };\n\n        var ticketmasterClassification = function ticketmasterClassification() {\n          return item.classifications ? item.classifications : null;\n        };\n\n        return __jsx(React.Fragment, {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 11\n          }\n        }, __jsx(\"div\", {\n          className: \"\".concat(css.infoBar, \" \").concat(state.moreInfo ? css.extended : null),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }\n        }, __jsx(\"span\", {\n          className: css.title,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }\n        }, item.name), __jsx(EventTimesVenue, {\n          startTime: item.source === \"yelp\" ? item.time_start : \"\".concat(item.dates.start.localDate, \"T\").concat(item.dates.start.localTime),\n          endTime: item.source === \"yelp\" ? item.time_end : null,\n          source: item.source,\n          venue: determineVenue(),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }\n        }), __jsx(EventPriceGenre, {\n          venue: item.source === \"yelp\" ? item.business_id : item._embedded.venues[0].name,\n          price: determinePrice(),\n          source: item.source,\n          genre: item.source === \"yelp\" ? item.category : ticketmasterClassification(),\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }\n        })), moreDetails(\"event\"));\n    }\n  };\n\n  var dispatch = usePartsDispatch();\n\n  var handlePart = function handlePart() {\n    if (state.added) {\n      return setState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          added: false\n        });\n      }), dispatch({\n        type: \"REMOVE_PART\",\n        payload: {\n          id: item.id\n        }\n      });\n    } else {\n      return GlobalParts.parts.length < 7 ? (setState(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          added: true\n        });\n      }), dispatch({\n        type: \"ADD_PART\",\n        payload: {\n          part: _objectSpread(_objectSpread({}, item), {}, {\n            gridIndex: null\n          })\n        }\n      })) : null;\n    }\n  }; // return resultsLoading ? (\n  //   <div className={css.resultCard} style={{ background: \"#999999\" }}>\n  //     <div className={css.infoBar} style={{ background: \"transparent\" }}>\n  //       <div className={css.loadingBar}></div>\n  //       <div className={css.loadingBar}></div>\n  //       <div className={css.loadingBar}></div>\n  //     </div>\n  //   </div>\n  // ) : (\n  //   <div\n  //     className={`${css.resultCard} ${state.moreInfo ? css.extended : null} ${\n  //       state.imageLoaded ? css.loaded : css.loading\n  //     }\n  //     `}\n  //     onClick={() =>\n  //       state.moreInfo\n  //         ? null\n  //         : setState((state) => ({ ...state, moreInfo: true }))\n  //     }\n  //   >\n  //     <ImageBackground\n  //       extended={state.moreInfo}\n  //       handleRetract={handleRetract}\n  //       type={item.type}\n  //       source={item.source}\n  //     >\n  //       <img\n  //         src={determineImageBackgroundSource()}\n  //         alt={item.name}\n  //         onLoad={() => setState({ ...state, imageLoaded: true })}\n  //       />\n  //     </ImageBackground>\n  //     <button\n  //       className={`${css.addButton} ${state.added ? css.remove : null}`}\n  //       onClick={(event) => (event.stopPropagation(), handlePart())}\n  //     >\n  //       {state.added ? \"Remove from Parts -\" : \"Add to Parts +\"}\n  //     </button>\n  //     {setCardDetails()}\n  //   </div>\n  // );\n\n\n  return __jsx(\"div\", {\n    className: css.resultCard,\n    style: {\n      background: \"#999999\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: css.infoBar,\n    style: {\n      background: \"transparent\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: css.loadingBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: css.loadingBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    className: css.loadingBar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(ResultCard, \"MwZBEVzUmLUZIW8qyPQ8vd4pulk=\", false, function () {\n  return [usePartsState, usePartsDispatch];\n});\n\n_c = ResultCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"ResultCard\");","map":{"version":3,"sources":["C:/Users/gmont/sekndproduction/components/SearchResults/ResultCard/ResultCard.tsx"],"names":["PriceAndType","Reviews","Phone","Location","EventTimesVenue","EventPriceGenre","EventDescription","PartLink","React","usePartsDispatch","usePartsState","css","ResultCard","item","resultsLoading","useState","added","moreInfo","imageLoaded","state","setState","GlobalParts","useEffect","i","parts","length","id","determineImageBackgroundSource","type","source","image_url","images","url","handleRetract","moreDetails","detailsWrapper","phone","location","display_address","description","event_site_url","setCardDetails","infoBar","extended","title","name","review_count","rating","price","city","categories","starsWrapper","determinePrice","cost","priceRanges","determineVenue","businesess_id","business_id","_embedded","venues","ticketmasterClassification","classifications","time_start","dates","start","localDate","localTime","time_end","category","dispatch","handlePart","payload","part","gridIndex","resultCard","background","loadingBar"],"mappings":"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","sourcesContent":["import { PriceAndType, Reviews, Phone, Location } from \"./Parts/PlacesInfo\";\r\nimport {\r\n  EventTimesVenue,\r\n  EventPriceGenre,\r\n  EventDescription,\r\n} from \"./Parts/EventsInfo\";\r\nimport { PartLink } from \"./Parts/PartLink\";\r\nimport { ImageBackground } from \"./Parts/ImageBackground\";\r\nimport * as React from \"react\";\r\nimport {\r\n  PartsProvider,\r\n  usePartsDispatch,\r\n  usePartsState,\r\n} from \"../../../state/DatePartsContext\";\r\nimport css from \"./ResultCard.module.scss\";\r\n\r\nexport const ResultCard: React.FC<{\r\n  item?: { [key: string]: any };\r\n  resultsLoading?: boolean;\r\n}> = ({ item, resultsLoading }) => {\r\n  const [state, setState] = React.useState<{\r\n    added: boolean;\r\n    moreInfo: boolean;\r\n    imageLoaded: boolean;\r\n  }>({ added: false, moreInfo: false, imageLoaded: false });\r\n\r\n  const GlobalParts = usePartsState();\r\n\r\n  React.useEffect(() => {\r\n    if (item) {\r\n      for (let i = 0; i < GlobalParts.parts.length; i++) {\r\n        if (GlobalParts.parts[i].id === item.id) {\r\n          setState((state) => ({ ...state, added: true }));\r\n        }\r\n      }\r\n    }\r\n  }, [GlobalParts]);\r\n\r\n  const determineImageBackgroundSource: () => string = () => {\r\n    switch (item.type) {\r\n      case \"place\":\r\n        return item.source === \"yelp\" ? item.image_url : null;\r\n      case \"event\":\r\n        return item.source === \"yelp\" ? item.image_url : item.images[0].url;\r\n      default:\r\n        return \"\";\r\n    }\r\n  };\r\n\r\n  const handleRetract: () => void = () => {\r\n    return state.moreInfo\r\n      ? setState((state) => ({ ...state, moreInfo: false }))\r\n      : null;\r\n  };\r\n\r\n  const moreDetails: (type: string) => JSX.Element | null = (type) => {\r\n    if (!state.moreInfo) return null;\r\n    switch (type) {\r\n      case \"place\":\r\n        return (\r\n          <div className={css.detailsWrapper}>\r\n            <Phone phone={item.phone}></Phone>\r\n            <Location\r\n              street={item.location.display_address[0]}\r\n              city={item.location.display_address[1]}\r\n            ></Location>\r\n            <PartLink url={item.url} />\r\n          </div>\r\n        );\r\n      case \"event\":\r\n        return (\r\n          <div className={css.detailsWrapper}>\r\n            <EventDescription description={item.description}></EventDescription>\r\n            <PartLink\r\n              url={item.source === \"yelp\" ? item.event_site_url : item.url}\r\n            />\r\n          </div>\r\n        );\r\n      default:\r\n        return <div className={css.detailsWrapper}></div>;\r\n    }\r\n  };\r\n\r\n  const setCardDetails: () => JSX.Element = () => {\r\n    switch (item.type) {\r\n      case \"place\":\r\n        return (\r\n          <React.Fragment>\r\n            <div\r\n              className={`${css.infoBar} ${\r\n                state.moreInfo ? css.extended : null\r\n              }`}\r\n            >\r\n              <span className={css.title}>{item.name}</span>\r\n              <Reviews\r\n                reviewCount={item.review_count}\r\n                rating={item.rating}\r\n              ></Reviews>\r\n              <PriceAndType\r\n                price={item.price}\r\n                city={item.location.city}\r\n                state={item.location.state}\r\n                type={\r\n                  item.categories && item.categories.length > 0\r\n                    ? item.categories[0].title\r\n                    : null\r\n                }\r\n              ></PriceAndType>\r\n              <div className={css.starsWrapper}></div>\r\n            </div>\r\n            {moreDetails(\"place\")}\r\n          </React.Fragment>\r\n        );\r\n      case \"event\":\r\n        const determinePrice: () =>\r\n          | { [key: string]: any }\r\n          | null\r\n          | string = () => {\r\n          switch (item.source) {\r\n            case \"yelp\":\r\n              if (!item.cost) return null;\r\n              return item.cost;\r\n            case \"ticketmaster\":\r\n              if (!item.priceRanges) return null;\r\n              return item.priceRanges[0];\r\n          }\r\n        };\r\n\r\n        const determineVenue: () => string | null = () => {\r\n          switch (item.source) {\r\n            case \"yelp\":\r\n              return !item.businesess_id || item.business_id === null\r\n                ? null\r\n                : item.business_id;\r\n            case \"ticketmaster\":\r\n              return item._embedded.venues[0].name;\r\n          }\r\n        };\r\n\r\n        const ticketmasterClassification: () => any | null = () => {\r\n          return item.classifications ? item.classifications : null;\r\n        };\r\n\r\n        return (\r\n          <React.Fragment>\r\n            <div\r\n              className={`${css.infoBar} ${\r\n                state.moreInfo ? css.extended : null\r\n              }`}\r\n            >\r\n              <span className={css.title}>{item.name}</span>\r\n              <EventTimesVenue\r\n                startTime={\r\n                  item.source === \"yelp\"\r\n                    ? item.time_start\r\n                    : `${item.dates.start.localDate}T${item.dates.start.localTime}`\r\n                }\r\n                endTime={item.source === \"yelp\" ? item.time_end : null}\r\n                source={item.source}\r\n                venue={determineVenue()}\r\n              ></EventTimesVenue>\r\n              <EventPriceGenre\r\n                venue={\r\n                  item.source === \"yelp\"\r\n                    ? item.business_id\r\n                    : item._embedded.venues[0].name\r\n                }\r\n                price={determinePrice()}\r\n                source={item.source}\r\n                genre={\r\n                  item.source === \"yelp\"\r\n                    ? item.category\r\n                    : ticketmasterClassification()\r\n                }\r\n              ></EventPriceGenre>\r\n            </div>\r\n            {moreDetails(\"event\")}\r\n          </React.Fragment>\r\n        );\r\n    }\r\n  };\r\n\r\n  const dispatch: React.Dispatch<{\r\n    type: string;\r\n    payload: { id?: string; part?: { [key: string]: any } };\r\n  }> = usePartsDispatch();\r\n\r\n  const handlePart: () => void = () => {\r\n    if (state.added) {\r\n      return (\r\n        setState((state) => ({ ...state, added: false })),\r\n        dispatch({ type: \"REMOVE_PART\", payload: { id: item.id } })\r\n      );\r\n    } else {\r\n      return GlobalParts.parts.length < 7\r\n        ? (setState((state) => ({ ...state, added: true })),\r\n          dispatch({\r\n            type: \"ADD_PART\",\r\n            payload: { part: { ...item, gridIndex: null } },\r\n          }))\r\n        : null;\r\n    }\r\n  };\r\n\r\n  // return resultsLoading ? (\r\n  //   <div className={css.resultCard} style={{ background: \"#999999\" }}>\r\n  //     <div className={css.infoBar} style={{ background: \"transparent\" }}>\r\n  //       <div className={css.loadingBar}></div>\r\n  //       <div className={css.loadingBar}></div>\r\n  //       <div className={css.loadingBar}></div>\r\n  //     </div>\r\n  //   </div>\r\n  // ) : (\r\n  //   <div\r\n  //     className={`${css.resultCard} ${state.moreInfo ? css.extended : null} ${\r\n  //       state.imageLoaded ? css.loaded : css.loading\r\n  //     }\r\n  //     `}\r\n  //     onClick={() =>\r\n  //       state.moreInfo\r\n  //         ? null\r\n  //         : setState((state) => ({ ...state, moreInfo: true }))\r\n  //     }\r\n  //   >\r\n  //     <ImageBackground\r\n  //       extended={state.moreInfo}\r\n  //       handleRetract={handleRetract}\r\n  //       type={item.type}\r\n  //       source={item.source}\r\n  //     >\r\n  //       <img\r\n  //         src={determineImageBackgroundSource()}\r\n  //         alt={item.name}\r\n  //         onLoad={() => setState({ ...state, imageLoaded: true })}\r\n  //       />\r\n  //     </ImageBackground>\r\n\r\n  //     <button\r\n  //       className={`${css.addButton} ${state.added ? css.remove : null}`}\r\n  //       onClick={(event) => (event.stopPropagation(), handlePart())}\r\n  //     >\r\n  //       {state.added ? \"Remove from Parts -\" : \"Add to Parts +\"}\r\n  //     </button>\r\n  //     {setCardDetails()}\r\n  //   </div>\r\n  // );\r\n\r\n  return (\r\n    <div className={css.resultCard} style={{ background: \"#999999\" }}>\r\n      <div className={css.infoBar} style={{ background: \"transparent\" }}>\r\n        <div className={css.loadingBar}></div>\r\n        <div className={css.loadingBar}></div>\r\n        <div className={css.loadingBar}></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}