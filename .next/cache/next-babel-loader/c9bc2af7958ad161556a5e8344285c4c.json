{"ast":null,"code":"// Amplify.configure({...config, ssr: true})\nexport default (async (req, res) => {\n  try {\n    if (req.method !== \"GET\") {\n      const {\n        startDateTime,\n        endDateTime,\n        radius,\n        location\n      } = req.body;\n      const ticketmasterEvents = new URL(\"https://app.ticketmaster.com/discovery/v2/events\"),\n            params = {\n        radius,\n        startDateTime,\n        endDateTime,\n        unit: [\"km\"],\n        apikey: `${process.env.TICKETMASTER_API_KEY}`\n      };\n      Object.keys(params).forEach(key => ticketmasterEvents.searchParams.append(key, params[key]));\n      isNaN(parseInt(location)) ? ticketmasterEvents.searchParams.append(\"city\", location) : ticketmasterEvents.searchParams.append(\"postalCode\", location);\n      const ticketmasterURLString = ticketmasterEvents.toString(); //function\n\n      const ticketmasterResponse = await fetch(ticketmasterURLString);\n      const jsonResponse = await ticketmasterResponse.json();\n      return res.send(jsonResponse);\n    }\n\n    return res.status(200).end(\"Ticket MAster API\");\n  } catch (err) {\n    return res.send(err);\n  }\n});","map":null,"metadata":{},"sourceType":"module"}