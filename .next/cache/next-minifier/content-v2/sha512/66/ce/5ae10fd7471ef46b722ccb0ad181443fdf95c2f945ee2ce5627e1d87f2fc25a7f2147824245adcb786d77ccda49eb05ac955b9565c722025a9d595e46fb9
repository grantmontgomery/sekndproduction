{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{\"72o5\":function(e,t,r){\"use strict\";r.r(t),r.d(t,\"default\",(function(){return _}));var n=r(\"a3WO\");var s=r(\"BsWD\");function a(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}var u=r(\"o0o1\"),c=r.n(u);function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=r(\"rePB\");function l(e,t,r,n,s,a,u){try{var c=e[a](u),i=c.value}catch(o){return void r(o)}c.done?t(i):Promise.resolve(i).then(n,s)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var a=e.apply(t,r);function u(e){l(a,n,s,u,c,\"next\",e)}function c(e){l(a,n,s,u,c,\"throw\",e)}u(void 0)}))}}var f=r(\"ODXe\"),v=r(\"q1tI\"),d=r(\"bgFo\"),h=function(){var e=y(c.a.mark((function e(t){var r,n,s,a,u,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.location,n=t.radius,s=t.startFormatted,a=t.endFormatted,e.prev=1,e.next=4,fetch(\"/api/ticketmasterAPI\",{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify({location:r,radius:Math.floor(.001*parseInt(n)).toString(),startDateTime:s,endDateTime:a})});case 4:return u=e.sent,e.next=7,u.json();case 7:return i=e.sent,o=i._embedded.events,e.abrupt(\"return\",o);case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt(\"return\",e.t0.message);case 15:case\"end\":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=y(c.a.mark((function e(t){var r,n,s,a,u,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.location,n=t.radius,s=t.placeType,e.prev=1,e.next=4,fetch(\"/api/yelpBusinessesAPI\",{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify({location:r,radius:parseInt(n),term:s})});case 4:return a=e.sent,e.next=7,a.json();case 7:return u=e.sent,(i=u.businesses).forEach((function(e){return e.type=\"place\",e.source=\"yelp\",e.inParts=!1})),e.abrupt(\"return\",i);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt(\"return\",e.t0.message);case 16:case\"end\":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=y(c.a.mark((function e(t){var r,n,s,a,u,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.location,n=t.radius,s=t.unixStartDate,a=t.unixEndDate,t.categories,e.prev=1,e.next=4,fetch(\"/api/yelpEventsAPI\",{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify({location:r,radius:parseInt(n),start_date:parseInt(s),end_date:parseInt(a)})});case 4:return u=e.sent,e.next=7,u.json();case 7:return i=e.sent,(o=i.events).forEach((function(e){return e.type=\"event\",e.source=\"yelp\",e.inParts=!1})),e.abrupt(\"return\",o);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt(\"return\",e.t0.message);case 16:case\"end\":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),w=r(\"BJjR\"),A=r.n(w),E=v.createElement;function _(e){var t=e.results,r=t.items,n=(t.errors,e.searchType),s=v.useState({resultsType:\"Events\"}),a=Object(f.a)(s,2),u=a[0];a[1];console.log(r),console.log(r.events);return E(d.b,null,E(\"main\",{className:A.a.queriedPage},E(\"section\",{className:A.a.queryDisplay}),E(\"section\",{className:A.a.header},function(){if(!n)return E(v.Fragment,null,E(\"button\",{className:A.a.typeButton},\"Places\"),E(\"button\",{className:A.a.typeButton},\"Events\"));switch(n){case\"ALL\":return E(v.Fragment,null,E(\"button\",{className:A.a.typeButton},\"Places\"),E(\"button\",{className:A.a.typeButton},\"Events\"));case\"PLACES\":return E(\"button\",{className:A.a.typeButton},\"Places\");case\"EVENTS\":return E(\"button\",{className:A.a.typeButton},\"Events\");default:return E(v.Fragment,null,E(\"button\",{className:A.a.typeButton},\"Places\"),E(\"button\",{className:A.a.typeButton},\"Events\"))}}(),E(\"button\",{className:A.a.sort},\"Sort\")),E(\"section\",{className:A.a.results},E(\"div\",{className:A.a.resultsSlider},function(){switch(n){case\"ALL\":return Array.isArray(r.places)&&Array.isArray(r.events)?\"Places\"===u.resultsType?r.places.map((function(e){return E(d.c,{key:e.id,item:e})})):r.events.map((function(e){return E(d.c,{key:e.id,item:e})})):null;case\"PLACES\":return Array.isArray(r.places)?r.places.map((function(e){return E(d.c,{key:e.id,item:e})})):null;case\"EVENTS\":return Array.isArray(r.events)?r.events.map((function(e){return E(d.c,{key:e.id,item:e})})):null;default:return Array.isArray(r.places)&&Array.isArray(r.events)?\"Places\"===u.resultsType?r.places.map((function(e){return E(d.c,{key:e.id,item:e})})):r.events.map((function(e){return E(d.c,{key:e.id,item:e})})):null}}()))))}_.getInitialProps=function(){var e=y(c.a.mark((function e(t){var r,n,s,u,l,f,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.query).queried){e.next=14;break}return n=r.queried.toString(),s=n.split(\"+\"),u={},s.forEach((function(e){var t=e.search(\"=\");if(-1!==t){var r=e.substring(0,t),n=e.substring(t+1);u[r]=n}})),l=function(){function e(t){i(this,e),Object(p.a)(this,\"searchParams\",void 0),Object(p.a)(this,\"results\",void 0),this.searchParams=t,this.results={items:{places:[],events:[]},errors:{yelpPlaces:\"\",yelpEvents:\"\",ticketmaster:\"\"}}}var t,r,n;return t=e,(r=[{key:\"yelpBusinesses\",value:function(){var e=y(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(this.searchParams);case 2:t=e.sent,Array.isArray(t)?this.results.items.places=t:this.results.errors.yelpPlaces=\"\".concat(t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"yelpEvents\",value:function(){var e=y(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(this.searchParams);case 2:t=e.sent,Array.isArray(t)?this.results.items.events=[].concat(a(this.results.items.events),a(t)):this.results.errors.yelpEvents=\"\".concat(t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:\"ticketMaster\",value:function(){var e=y(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(this.searchParams);case 2:t=e.sent,Array.isArray(t)?this.results.items.events=[].concat(a(this.results.items.events),a(t)):this.results.errors.ticketmaster=\"\".concat(t);case 4:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}])&&o(t.prototype,r),n&&o(t,n),e}(),f=function(){var e=y(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new l(u),e.prev=1,e.t0=t,e.next=\"PLACES\"===e.t0?5:\"EVENTS\"===e.t0?7:\"ALL\"===e.t0?10:14;break;case 5:return r.yelpBusinesses(),e.abrupt(\"return\",r.results);case 7:return r.yelpEvents(),r.ticketMaster(),e.abrupt(\"return\",r.results);case 10:case 14:return r.yelpBusinesses(),r.yelpEvents(),r.ticketMaster(),e.abrupt(\"return\",r.results);case 18:e.next=26;break;case 20:return e.prev=20,e.t1=e.catch(1),r.results.errors.yelpPlaces=\"CALL ERROR\",r.results.errors.yelpEvents=\"CALL ERROR\",r.results.errors.ticketmaster=\"CALL ERROR\",e.abrupt(\"return\",r.results);case 26:case\"end\":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),e.next=10,f(u.searchType);case 10:return v=e.sent,e.abrupt(\"return\",{results:v,searchType:u.searchType});case 14:return e.abrupt(\"return\",{results:{},searchType:\"ALL\"});case 15:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},BJjR:function(e,t,r){e.exports={queriedPage:\"Queried_queriedPage__2Rcjt\",queryDisplay:\"Queried_queryDisplay__2jitW\",header:\"Queried_header__2wmM2\",typeButton:\"Queried_typeButton__19BJ8\",sort:\"Queried_sort__EipTf\",results:\"Queried_results__2nOy2\",resultsSlider:\"Queried_resultsSlider__IHQxp\"}},pq6B:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/search/[queried]\",function(){return r(\"72o5\")}])}},[[\"pq6B\",0,2,1,3,4]]]);","extractedComments":[]}