{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[11],{\"72o5\":function(t,e,r){\"use strict\";r.r(e),r.d(e,\"default\",(function(){return b}));var n=r(\"KQm4\"),s=r(\"o0o1\"),a=r.n(s);function c(t,e,r,n,s,a,c){try{var i=t[a](c),u=i.value}catch(o){return void r(o)}i.done?e(u):Promise.resolve(u).then(n,s)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(n,s){var a=t.apply(e,r);function i(t){c(a,n,s,i,u,\"next\",t)}function u(t){c(a,n,s,i,u,\"throw\",t)}i(void 0)}))}}var u=r(\"1OyB\"),o=r(\"vuIU\"),p=r(\"rePB\"),l=r(\"ODXe\"),h=r(\"q1tI\"),f=r(\"bgFo\"),d=function(){var t=i(a.a.mark((function t(e){var r,n,s,c,i,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.location,n=e.radius,s=e.startFormatted,c=e.endFormatted,t.prev=1,t.next=4,fetch(\"http://localhost:3000/api/ticketmasterAPI\",{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify({location:r,radius:Math.floor(.001*parseInt(n)).toString(),startDateTime:s,endDateTime:c})});case 4:return i=t.sent,t.next=7,i.json();case 7:return u=t.sent,(o=u._embedded.events).forEach((function(t){return t.source=\"ticketmaster\",t.type=\"event\",t.inParts=!1})),t.abrupt(\"return\",o);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt(\"return\",t.t0.message);case 16:case\"end\":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=i(a.a.mark((function t(e){var r,n,s,c,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.location,n=e.radius,s=e.placeType,t.prev=1,t.next=4,fetch(\"http://localhost:3000/api/yelpBusinessesAPI\",{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify({location:r,radius:parseInt(n),term:s})});case 4:return c=t.sent,t.next=7,c.json();case 7:return i=t.sent,(u=i.businesses).forEach((function(t){return t.type=\"place\",t.source=\"yelp\",t.inParts=!1})),t.abrupt(\"return\",u);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt(\"return\",t.t0.message);case 16:case\"end\":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=i(a.a.mark((function t(e){var r,n,s,c,i,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.location,n=e.radius,s=e.unixStartDate,c=e.unixEndDate,e.categories,t.prev=1,t.next=4,fetch(\"http://localhost:3000/api/yelpEventsAPI\",{headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},method:\"POST\",body:JSON.stringify({location:r,radius:parseInt(n),start_date:parseInt(s),end_date:parseInt(c)})});case 4:return i=t.sent,t.next=7,i.json();case 7:return u=t.sent,(o=u.events).forEach((function(t){return t.type=\"event\",t.source=\"yelp\",t.inParts=!1})),t.abrupt(\"return\",o);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt(\"return\",t.t0.message);case 16:case\"end\":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),m=r(\"nOHt\"),w=h.createElement;function b(){var t=h.useState({resultsType:\"\"}),e=Object(l.a)(t,2),r=(e[0],e[1],h.useState({items:[],errors:{yelpPlaces:\"\",yelpEvents:\"\",ticketmaster:\"\"}})),s=Object(l.a)(r,2),c=s[0],b=s[1],E=Object(m.useRouter)(),P=function(){function t(e){Object(u.a)(this,t),Object(p.a)(this,\"searchParams\",void 0),Object(p.a)(this,\"results\",void 0),this.searchParams=e,this.results={items:[],errors:{yelpPlaces:\"\",yelpEvents:\"\",ticketmaster:\"\"}}}return Object(o.a)(t,[{key:\"yelpBusinesses\",value:function(){var t=i(a.a.mark((function t(){var e,r,n,s,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.searchParams,r=e.location,n=e.radius,s=e.placeType,t.next=3,v({location:r,radius:n,placeType:s});case 3:c=t.sent,Array.isArray(c)?this.results.items=c:this.results.errors.yelpPlaces=\"\".concat(c);case 5:case\"end\":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:\"yelpEvents\",value:function(){var t=i(a.a.mark((function t(){var e,r,s,c,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.searchParams,r=e.location,s=e.radius,c=e.unixStartDate,i=e.unixEndDate,t.next=3,y({location:r,radius:s,unixStartDate:c,unixEndDate:i});case 3:u=t.sent,Array.isArray(u)?this.results.items=[].concat(Object(n.a)(this.results.items),Object(n.a)(u)):this.results.errors.yelpEvents=\"\".concat(u);case 5:case\"end\":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:\"ticketMaster\",value:function(){var t=i(a.a.mark((function t(){var e,r,s,c,i,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.searchParams,r=e.location,s=e.radius,c=e.startFormatted,i=e.endFormatted,t.next=3,d({location:r,radius:s,startFormatted:c,endFormatted:i});case 3:u=t.sent,Array.isArray(u)?this.results.items=[].concat(Object(n.a)(this.results.items),Object(n.a)(u)):this.results.errors.ticketmaster=\"\".concat(u);case 5:case\"end\":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();return h.useEffect((function(){var t=E.query;console.log(t),console.log(\"running new call.\");var e=new P(t);switch(t.searchType){case\"ALL\":e.yelpBusinesses(),e.yelpEvents(),e.ticketMaster(),console.log(e.results),b(t.results);case\"PLACES\":e.yelpBusinesses(),b(t.results);case\"EVENTS\":e.yelpEvents(),e.ticketMaster(),b(t.results);default:e.yelpBusinesses(),e.yelpEvents(),e.ticketMaster(),b(t.results)}}),[]),console.log(c),w(f.b,null)}},pq6B:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/search/[queried]\",function(){return r(\"72o5\")}])}},[[\"pq6B\",1,2,0,3,4]]]);","extractedComments":[]}